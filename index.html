<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Local Web API</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="" />
  </head>
  <body>
    <div>
      <form action="">
        <label for="playerIp">Type the player Local IP here</label>
        <input
          type="text"
          id="playerIp"
          name="playerIp"
          value=""
          placeholder="10.0.34.162"
        />
        <label for="playerPort">Type the player Local Web API port here</label>
        <input
          type="text"
          id="playerPort"
          name="playerPort"
          value=""
          placeholder="5544"
        />
      </form>

      <button id="button 1" onclick="triggerCampaign()">Play Campaign 1</button>
      <button id="button 2" onclick="stopCampaign()">
        Stop Current Campaign
      </button>
      <form action="" onsubmit="return false">
        <label for="temperature">Type temperature here</label>
        <input type="number" id="temperature" name="temperature" value="" />
        <button id="" onclick="changeTemperature()">Submit Temperature</button>
      </form>
    </div>
    <div>
      <p id="commandSent"></p>
    </div>
    <script>
      let playerIp = document.getElementById("playerIp").value;
      let playerPort = document.getElementById("playerPort").value;

      function triggerCampaign() {
        let playerIp = document.getElementById("playerIp").value;
        let playerPort = document.getElementById("playerPort").value;
        let pattern = document.getElementById("pattern").value;
        if (playerIp && playerPort) {
          let url =
            "http://" + playerIp + ":" + playerPort + "/trigger/" + pattern;
            document.getElementById("commandSent").innerHTML =
            "The command sent was: " + url;
          return fetch("http://10.0.34.172:5544/trigger/tocarcampanha", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(""),
        });
      } else {
        window.alert("Please input the player IP and Player Port");
      }
      function stopCampaign() {
        let playerIp = document.getElementById("playerIp").value;
        let playerPort = document.getElementById("playerPort").value;
        if (playerIp && playerPort) {
          let url =
            "http://" + playerIp + ":" + playerPort + "/campaign/current/stop";
          document.getElementById("commandSent").innerHTML =
            "The command sent was: " + url;
          return fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(""),
          });
        } else {
          window.alert("Please input the player IP and Player Port");
        }
      }
      function changeTemperature() {
        let temp = document.getElementById("temperature").value;
        document.getElementById("commandSent").innerHTML =
          "The command sent was: http://10.0.34.172:5544/attribute/Temperature/" +
          temp;
        return fetch("http://10.0.34.172:5544/attribute/Temperature/" + temp, {
          method: "PUT",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(""),
        });
      }
    </script>
  </body>
</html>
